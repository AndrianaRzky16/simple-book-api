"use strict";var _express=_interopRequireDefault(require("express")),_books=_interopRequireDefault(require("./books.js")),_middleware=require("./middleware.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var app=(0,_express.default)(),port=3e3;app.use(_express.default.json()),app.use(_middleware.timeLogger),app.use(_middleware.requestLogger),app.use(_middleware.requestModifier),app.set("view engine","ejs"),app.set("views","./views"),app.get("/profile",function(e,o){o.render("profile",{name:"John Doe"})}),app.get("/web/books",function(e,o){o.render("books",{books:_books.default})}),app.get("/books",function(e,o){console.log(),o.setHeader("Content-Type","application/json"),o.end(JSON.stringify(_books.default))}),app.get("/books/:id",function(e,o){var t=parseInt(e.params.id),n=_books.default.find(function(e){return e.id===t});n?(o.setHeader("Content-Type","application/json"),o.end(JSON.stringify(n))):(o.setHeader("Content-Type","application/json"),o.end(JSON.stringify({error:"Book not found"})))}),app.get("/search",function(e,o){if(e.query.title){var t=e.query.title.toLowerCase(),n=_books.default.filter(function(e){return e.title.toLowerCase().includes(t)});o.setHeader("Content-Type","application/json"),o.end(JSON.stringify(n))}else o.setHeader("Content-Type","application/json"),o.end(JSON.stringify({error:"No search criteria provided"}))}),app.post("/books",function(e,o){var t=e.body;_books.default.push(t),o.setHeader("Content-Type","application/json"),t?(o.writeHead(201),o.end(JSON.stringify({success:!0,message:"Book added successfully",data:_books.default}))):(o.writeHead(500),o.end(JSON.stringify({error:"Failed to add book"})))}),app.put("/books/:id",function(e,o){var t=parseInt(e.params.id),n=_books.default.findIndex(function(e){return e.id===t});-1!==n?(Object.assign(_books.default[n],e.body),o.setHeader("Content-Type","application/json"),o.writeHead(200),o.end(JSON.stringify({success:!0,message:"Book updated successfully",data:_books.default[n]}))):(o.setHeader("Content-Type","application/json"),o.writeHead(404),o.end(JSON.stringify({error:"Book not found"})))}),app.delete("/books/:id",function(e,o){var t=parseInt(e.params.id),n=_books.default.findIndex(function(e){return e.id===t});-1!==n?(_books.default.splice(n,1),o.setHeader("Content-Type","application/json"),o.writeHead(200),o.end(JSON.stringify({success:!0,message:"Book deleted successfully",data:_books.default}))):(o.setHeader("Content-Type","application/json"),o.writeHead(404),o.end(JSON.stringify({error:"Book not found"})))}),app.delete(),app.use(function(e,o){o.setHeader("Content-Type","application/json"),o.writeHead(405),o.end(JSON.stringify({error:"Method Not Allowed"}))}),app.listen(port,function(){console.log("Server running at http://localhost:".concat(port,"/"))});
//# sourceMappingURL=index.min.js.map
